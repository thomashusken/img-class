{% extends "base.html" %}

{% block title %}Upload{% endblock %}
{% block current %}(current){% endblock %}
{% block content %}
    <h1 class="mt-5">Upload</h1>
      <p class="lead">Upload your file here</p>
      <form method="POST" enctype="multipart/form-data">
        <input type="file" name="data" id="data" />
        <input type="submit" value="Submit" />
      </form>
    <h1 class="mt-3">Results</h1>
    {% if prediction %}
        <h2 class="mt-3">Image</h2>
        <img src="data:image/png;base64,{{return_image|safe}}", height="400">
        <h2 class="mt-3">Prediction</h2>
        <p><div id="prediction_chart" width="300"></div></p>
    {% else %}
    <p>After you upload a file, your results will be shown here.</p>
    {% endif %}
    <script>
             var prediction_chart = c3.generate({
                    bindto: "#prediction_chart",
                    data: {json: JSON.parse({{ prediction|tojson|safe }}), type: 'bar'},
                    bar: {width: {ratio: 0.5}},
                    axis: {
                        x: {
                            type:'category'
                        }
                    },
                });
    </script>
{% endblock %}

